<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test 13.11</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>

</head>

<body>

    <div class="container mt-5">

        <section>
            <h2 class="mt-2 mb-2">Section 1</h2>
            <span style="opacity: 0.6; ">If you want to sum up all digits / check if a number is palindrome, enter
                number only in the first row.</span>
            <div class="form-group mt-2">
                <input type="number" class="form-control" id="num1" placeholder="Enter number">
                <input type="number" class="form-control" id="num2" placeholder="Enter number">
            </div>
            <button class="btn btn-primary" onclick="subtract()">Subtract</button>
            <button class="btn btn-success" onclick="add()">Add</button>
            <button class="btn btn-warning" onclick="sumUp()">Sum Up all digits</button>
            <button class="btn btn-info" onclick="checkPalindrome()">Check if palindrome</button>
        </section>


        <div class="container mt-2" id="result">
            <!-- Display Result -->
        </div>

    </div>

    <script>
        const MY_SERVER = 'http://127.0.0.1:5000/functions'

        let called_simple = false

        const subtract = async () => {
            try {
                const response = await axios.post(MY_SERVER, {
                    "n1": num1.value,
                    "n2": num2.value,
                    "func": "sub",
                    "call": called_simple
                });
                result.innerHTML = response.data['message']
                called_simple = true
            } catch (error) {
                result.innerHTML = error.response.data.error
            };
        }

        const add = async () => {
            try {
                const response = await axios.post(MY_SERVER, {
                    "n1": num1.value,
                    "n2": num2.value,
                    "func": "add",
                    "call": called_simple
                });
                result.innerHTML = response.data['message']
                called_simple = true
            } catch (error) {
                result.innerHTML = error.response.data.error
            };
        }

        const sumUp = async () => {
            try {
                const response = await axios.post(MY_SERVER, {
                    "n1": num1.value,
                    "n2": num2.value,
                    "func": "sum",
                    "call": called_simple
                });
                result.innerHTML = response.data['message']
            } catch (error) {
                result.innerHTML = error.response.data.error
            };
        }

        const checkPalindrome = async () => {
            try {
                const response = await axios.post(MY_SERVER, {
                    "n1": num1.value,
                    "n2": num2.value,
                    "func": "pal",
                    "call": called_simple
                });
                result.innerHTML = response.data['message']
            } catch (error) {
                result.innerHTML = error.response.data.error
            };
        }

    </script>


    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>